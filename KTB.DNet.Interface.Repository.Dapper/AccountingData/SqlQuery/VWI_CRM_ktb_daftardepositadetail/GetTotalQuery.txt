select 
	COUNT(1)
from (
	SELECT      
		a.[modifiedonbehalfby]
		,a.[modifiedbyyominame]
		,a.[createdbyname]
		,a.[transactioncurrencyid]
		,a.[modifiedon]
		,a.[ktb_depositaid]
		,a.[modifiedbyname]
		,a.[ktb_description]
		,a.[ktb_transactiondate]
		,a.[owningbusinessunitname]
		,a.[createdonbehalfbyyominame]
		,a.[ktb_documentno]
		,a.[owneridname]
		,a.[ktb_daftardepositaid]
		,a.[importsequencenumber]
		,a.[createdonbehalfby]
		,a.[ktb_daftardepositadetailid]
		,a.[modifiedonbehalfbyname]
		,a.[owningteam]
		,a.[versionnumber]
		,a.[createdon]
		,a.[createdby]
		,a.[owneridtype]
		,a.[modifiedonbehalfbyyominame]
		,a.[ktb_iddetail]
		,a.[ktb_amount_base]
		,a.[modifiedby]
		,a.[overriddencreatedon]
		,a.[ktb_daftardepositaidname]
		,a.[createdonbehalfbyname]
		,a.[exchangerate]
		,a.[owninguser]
		,a.[statuscodename]
		,a.[owningbusinessunit]
		,a.[timezoneruleversionnumber]
		,a.[ktb_refferenceno]
		,a.[statecodename]
		,a.[ktb_amount]
		,a.[ktb_statusdebet]
		,a.[transactioncurrencyidname]
		,a.[createdbyyominame]
		,a.[statuscode]
		,a.[ktb_daftardepositadetail]
		,a.[ktb_tipe]
		,a.[statecode]
		,a.[owneridyominame]
		,a.[ownerid]
		,a.[utcconversiontimezonecode]
		,a.[DealerCode]
		,a.[SourceType]
		,a.[RowStatus]
		,a.[LastSyncDate]
		,b.msdyn_companycode
	FROM [CRM_ktb_daftardepositadetail] a WITH (NOLOCK)
	LEFT JOIN CRM_businessunit b WITH(NOLOCK) 
	ON B.businessunitid = a.owningbusinessunit   
	{0}
) as VWI_CRM_ktb_daftardepositadetail