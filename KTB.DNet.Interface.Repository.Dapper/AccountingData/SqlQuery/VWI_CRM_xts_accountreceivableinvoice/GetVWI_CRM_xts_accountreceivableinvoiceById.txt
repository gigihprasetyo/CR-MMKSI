SELECT 
	ROW_NUMBER() OVER (ORDER BY (Select 0) ) AS IDRow
	,company
	,businessunitcode
	,versionnumber
	,createdon
	,ktb_spkidname
	,xts_ordernumber
	,ktb_parentbusinessunitid
	,xts_financingcompanyinvoiceamount
	,xts_originalreferencenumberidname
	,statuscodename
	,xts_status
	,xts_customerid
	,modifiedbyyominame
	,owneridtype
	,xts_type
	,xts_billabletype
	,xts_taxregistrationnumber
	,createdonbehalfby
	,ktb_origarinvoicenumber
	,xts_financingcompanyidname
	,modifiedbyname
	,xts_salesorderid
	,xts_newvehiclesalesorderid
	,xts_salesorderidname
	,ktb_sourcetypenumbering
	,owneridname
	,overriddencreatedon
	,xts_deliveryorderid
	,xts_newvehicledeliveryorderidname
	,xts_totalreceiptamount_base
	,xts_financingcompanynumber
	,createdonbehalfbyyominame
	,modifiedonbehalfby
	,exchangerate
	,xts_workorderidname
	,xts_usedvehiclesalesorderid
	,xts_customeridyominame
	,owningteam
	,xts_taxinvoicenumber
	,xts_termofpayment
	,xts_newvehicledeliveryorderid
	,xts_financingcompanybalance
	,statecode
	,ktb_sourcetypenumberingname
	,ktb_spkid
	,xts_sourcetype
	,timezoneruleversionnumber
	,xts_serviceproportionalinvoiceid
	,xts_financingcompanybalance_base
	,xts_writeoffbalanceid
	,ktb_productid
	,xts_locking
	,xts_handling
	,ktb_chassisnumber
	,xts_customernumber
	,xts_reversingname
	,xts_originalreferencenumber
	,xts_usedvehicledeliveryorderid
	,xts_accountreceivableinvoice
	,createdonbehalfbyname
	,ktb_ordertypeidname
	,xts_newvehiclesalesorderidname
	,utcconversiontimezonecode
	,xts_billabletypename
	,xts_financingcompanyreceiptamount_base
	,xts_deliveryordernumber
	,xts_statusname
	,xts_typename
	,ktb_enginenumber
	,ownerid
	,modifiedon
	,importsequencenumber
	,owneridyominame
	,xts_writeoffbalanceidname
	,xts_balance
	,xts_customeridname
	,xts_transactiondate
	,xts_invoiceamount
	,xts_workorderid
	,createdbyname
	,ktb_ordertypeid
	,xts_businessunitid
	,modifiedonbehalfbyname
	,xts_duedate
	,xts_balance_base
	,ktb_productidname
	,ktb_interfaceprocessname
	,xts_handlingname
	,xts_originalreferencenumberid
	,xts_serviceproportionalinvoiceidname
	,transactioncurrencyid
	,ktb_customerdescription
	,xts_usedvehicledeliveryorderidname
	,createdby
	,xts_deliveryorderidname
	,modifiedby
	,xts_financingcompanyinvoiceamount_base
	,xts_reversing
	,createdbyyominame
	,owninguser
	,transactioncurrencyidname
	,owningbusinessunit
	,xts_financingcompanyid
	,ktb_vehicleproductionyear
	,xts_invoiceamount_base
	,ktb_vehiclecolordescription
	,xts_sourcetypename
	,xts_accountreceivableinvoiceid
	,statuscode
	,modifiedonbehalfbyyominame
	,ktb_parentbusinessunitidname
	,ktb_say
	,xts_totalreceiptamount
	,xts_financingcompanyidyominame
	,ktb_interfaceprocess
	,xts_usedvehiclesalesorderidname
	,statecodename
	,xts_businessunitidname
	,xts_financingcompanyreceiptamount
	,RowStatus
	,ktb_isallowcancel
	,ktb_externalcode
	,msdyn_companycode
from (
	SELECT  
		b.ktb_bucompany company
		, b.ktb_dealercode businessunitcode
		, a.* 
		, b.msdyn_companycode
	FROM CRM_xts_accountreceivableinvoice a WITH(NOLOCK)
	LEFT JOIN CRM_businessunit b WITH(NOLOCK) 
	ON b.businessunitid = a.xts_businessunitid
	WHERE xts_accountreceivableinvoiceid = @Id
) VWI_CRM_xts_accountreceivableinvoice 
