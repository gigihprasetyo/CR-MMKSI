SELECT 
	ROW_NUMBER() OVER (ORDER BY (SELECT 0)) AS IDRow
	,businessunitcode
	,versionnumber
	,createdon
	,xts_fromexteriorcoloridname
	,xts_tobatchid
	,xts_fromwarehouseidname
	,xts_consumptiontaxinid
	,xts_eventdata
	,statuscodename
	,xts_basequantity
	,xts_toserialid
	,xts_inventorytransferidname
	,modifiedbyyominame
	,xts_inventorytransferid
	,xts_tointeriorcoloridname
	,owneridtype
	,xts_fromconfigurationidname
	,xts_tostyleidname
	,createdonbehalfby
	,modifiedbyname
	,xts_fromlocationid
	,xts_inventoryunitid
	,owneridname
	,xts_inventorytransferdetailid
	,overriddencreatedon
	,xts_fromserialid
	,xts_tostyleid
	,xts_fromserialidname
	,createdonbehalfbyyominame
	,transactioncurrencyidname
	,modifiedonbehalfby
	,xjp_antiqueledgerid
	,xts_stockinventorynewvehicleid
	,xts_fromlocationidname
	,xts_fromsiteidname
	,owningteam
	,xts_transactionunitid
	,xts_servicepartsandmaterialidname
	,xts_productidname
	,statecode
	,xts_tositeidname
	,timezoneruleversionnumber
	,xts_consumptiontaxinidname
	,xts_fromstyleid
	,xts_towarehouseid
	,xts_frombusinessunitidname
	,xts_toexteriorcolorid
	,xts_transactionunitidname
	,xts_fromsiteid
	,xts_quantity
	,xjp_antiqueledgeridname
	,ktb_latestpurchaseprice_base
	,createdonbehalfbyname
	,ktb_chassisnumber
	,ktb_latestpurchaseprice
	,xts_productid
	,xts_fromstyleidname
	,xts_locking
	,utcconversiontimezonecode
	,xts_tobusinessunitidname
	,ownerid
	,modifiedon
	,importsequencenumber
	,owneridyominame
	,ktb_cogstrx
	,xts_tositeid
	,xts_toconfigurationidname
	,xts_tobusinessunitid
	,xts_toserialidname
	,exchangerate
	,xts_tointeriorcolorid
	,xts_stocknumberlookuptype
	,xts_frombusinessunitid
	,xts_towarehouseidname
	,createdbyname
	,xts_inventoryunitidname
	,modifiedonbehalfbyname
	,xts_tolocationidname
	,xts_tolocationid
	,xts_frombatchid
	,xts_fromexteriorcolorid
	,xts_inventorytransferdetail
	,xts_sourcedata
	,transactioncurrencyid
	,createdby
	,xts_toexteriorcoloridname
	,modifiedby
	,ktb_cogstrx_base
	,xts_vehicleidentificationnumber
	,xts_stockinventorynewvehicleidname
	,createdbyyominame
	,owninguser
	,xts_frominteriorcoloridname
	,xts_frombatchidname
	,xts_stockid
	,xts_stockidname
	,xts_consumptiontaxoutidname
	,xts_tobatchidname
	,xts_consumptiontaxoutid
	,xts_fromconfigurationid
	,statuscode
	,modifiedonbehalfbyyominame
	,xts_frominteriorcolorid
	,xts_remarks
	,xts_fromwarehouseid
	,xts_stocknumberlookupname
	,xts_productdescription
	,xts_servicepartsandmaterialid
	,statecodename
	,xts_toconfigurationid
	,owningbusinessunit
	,RowStatus
	,ktb_ata
FROM (
	SELECT  
          b.ktb_bucompany company
        , b.ktb_dealercode businessunitcode
        , a.*  
        , b.msdyn_companycode
    FROM CRM_xts_inventorytransferdetail a WITH(NOLOCK)
	LEFT JOIN CRM_businessunit b WITH(NOLOCK) 
    ON b.businessunitid = a.owningbusinessunit
    WHERE xts_inventorytransferdetailid = @Id
) VWI_CRM_xts_inventorytransferdetail
