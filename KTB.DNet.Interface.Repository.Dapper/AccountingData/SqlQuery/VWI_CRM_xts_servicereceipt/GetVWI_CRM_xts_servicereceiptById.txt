SELECT 
      ROW_NUMBER() OVER (ORDER BY (SELECT 0)) AS IDRow
      ,[company]
      ,[businessunitcode]
      ,[xts_parentbusinessunitid]
      ,[versionnumber]
      ,[xts_consumptiontaxid]
      ,[createdon]
      ,[xts_serviceinstructionid]
      ,[xjp_idempotentmessage]
      ,[statuscodename]
      ,[xts_status]
      ,[xts_totalactualcost_base]
      ,[modifiedbyyominame]
      ,[owneridtype]
      ,[xts_laststatus]
      ,[modifiedbyname]
      ,[owneridname]
      ,[xts_servicetypename]
      ,[overriddencreatedon]
      ,[xts_subcontractinvoicedate]
      ,[createdonbehalfbyyominame]
      ,[modifiedonbehalfby]
      ,[exchangerate]
      ,[xts_servicereceiptnumber]
      ,[xts_actualtechnicalfee]
      ,[owningteam]
      ,[xts_actualpartsfee]
      ,[xts_totalbaseamount]
      ,[xts_servicereceiptid]
      ,[statecode]
      ,[xts_actualsubcontractfee_base]
      ,[xts_serviceinstructionidname]
      ,[timezoneruleversionnumber]
      ,[xts_actualpartsfee_base]
      ,[xts_servicedestinationlookuptype]
      ,[xts_consumptiontaxamount]
      ,[xts_handling]
      ,[xts_servicedestinationlookupname]
      ,[createdonbehalfbyname]
      ,[xts_servicedestinationid]
      ,[createdonbehalfby]
      ,[utcconversiontimezonecode]
      ,[xts_businessunitid]
      ,[xts_statusname]
      ,[ownerid]
      ,[modifiedon]
      ,[importsequencenumber]
      ,[owneridyominame]
      ,[xts_actualsubcontractfee]
      ,[xts_subcontractcostincludetax_base]
      ,[xts_locking]
      ,[xts_laststatusname]
      ,[xts_transactiondate]
      ,[createdbyname]
      ,[xts_totalactualcost]
      ,[modifiedonbehalfbyname]
      ,[xts_consumptiontaxamount_base]
      ,[xts_servicedestinationbusinessunitid]
      ,[xts_subcontractcostincludetax]
      ,[xts_servicedestinationidname]
      ,[xts_servicedestinationbusinessunitidname]
      ,[xts_consumptiontaxidname]
      ,[xts_totalbaseamount_base]
      ,[createdby]
      ,[modifiedby]
      ,[xts_vehicleidentificationnumber]
      ,[createdbyyominame]
      ,[owninguser]
      ,[transactioncurrencyidname]
      ,[xts_servicedestinationdescription]
      ,[owningbusinessunit]
      ,[xts_stockidname]
      ,[transactioncurrencyid]
      ,[xts_actualtechnicalfee_base]
      ,[xts_parentbusinessunitidname]
      ,[xts_servicetype]
      ,[statuscode]
      ,[modifiedonbehalfbyyominame]
      ,[xts_handlingname]
      ,[xts_subcontractinvoiceno]
      ,[statecodename]
      ,[xts_businessunitidname]
      ,[xts_stockid]
      ,[msdyn_companycode]
FROM (
	SELECT 
        b.ktb_bucompany company,
        b.ktb_dealercode businessunitcode
        , a.* 
        , b.msdyn_companycode
    FROM CRM_xts_servicereceipt a WITH(NOLOCK)
    LEFT JOIN CRM_businessunit b WITH(NOLOCK) 
    ON b.businessunitid = a.xts_businessunitid
    WHERE xts_servicereceiptid = @Id
) VWI_CRM_xts_servicereceipt
