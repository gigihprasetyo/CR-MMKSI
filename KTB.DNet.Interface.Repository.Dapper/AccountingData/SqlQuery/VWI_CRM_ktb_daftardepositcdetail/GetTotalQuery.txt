select 
	COUNT(1)
from (
	SELECT      
		a.[ktb_credit_base]
		,a.[createdonbehalfbyyominame]
		,a.[modifiedonbehalfby]
		,a.[owningteam]
		,a.[transactioncurrencyidname]
		,a.[statecode]
		,a.[owneridname]
		,a.[statecodename]
		,a.[owninguser]
		,a.[createdonbehalfby]
		,a.[transactioncurrencyid]
		,a.[ktb_paymenttype]
		,a.[ktb_postingdate]
		,a.[ktb_debit]
		,a.[importsequencenumber]
		,a.[ktb_clearingdate]
		,a.[ktb_invoiceno]
		,a.[utcconversiontimezonecode]
		,a.[createdbyyominame]
		,a.[modifiedby]
		,a.[modifiedbyname]
		,a.[versionnumber]
		,a.[ktb_daftardepositcdetail]
		,a.[modifiedbyyominame]
		,a.[createdby]
		,a.[timezoneruleversionnumber]
		,a.[ktb_debit_base]
		,a.[owneridtype]
		,a.[statuscodename]
		,a.[ktb_remark]
		,a.[ktb_credit]
		,a.[owneridyominame]
		,a.[modifiedon]
		,a.[exchangerate]
		,a.[ktb_daftardepositcid]
		,a.[ktb_referenceno]
		,a.[modifiedonbehalfbyyominame]
		,a.[statuscode]
		,a.[createdbyname]
		,a.[createdon]
		,a.[owningbusinessunitname]
		,a.[createdonbehalfbyname]
		,a.[owningbusinessunit]
		,a.[modifiedonbehalfbyname]
		,a.[ktb_iddetail]
		,a.[ktb_daftardepositcidname]
		,a.[ktb_depositid]
		,a.[ktb_daftardepositcdetailid]
		,a.[ownerid]
		,a.[overriddencreatedon]
		,a.[ktb_documentno]
		,a.[DealerCode]
		,a.[SourceType]
		,a.[RowStatus]
		,a.[LastSyncDate]
		,b.msdyn_companycode
	FROM [CRM_ktb_daftardepositcdetail] a WITH (NOLOCK)
	LEFT JOIN CRM_businessunit b WITH(NOLOCK) 
	ON B.businessunitid = a.owningbusinessunit   
	{0}
) as VWI_CRM_ktb_daftardepositcdetail